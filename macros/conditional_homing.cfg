#####################################################################
#   Conditional Homing
#####################################################################

# Conditional G28 (home if not already homed)
[gcode_macro CG28]
gcode:
  {% if "x" not in printer.toolhead.homed_axes or "y" not in printer.toolhead.homed_axes or "z" not in printer.toolhead.homed_axes %}
    {% if 'PROBE_LOCK' in params%}
      {% if verbose %}
        { action_respond_info("PROBE_LOCK = True") }
      {% endif %}
      G28 PROBE_LOCK
    {% else %}
      G28
    {% endif %}
  {% endif %}

[gcode_macro ZCG28]
gcode:
	{% if "z" not in printer.toolhead.homed_axes %}
      {% if 'PROBE_LOCK' in params%}
        {% if verbose %}
          { action_respond_info("PROBE_LOCK = True") }
        {% endif %}
        G28 Z PROBE_LOCK
      {% else %}
        G28 Z
      {% endif %}
	{% endif %}

# Conditional G28 (home if not already homed)
[gcode_macro XYCG28]
gcode:
    {% if "xy" not in printer.toolhead.homed_axes %}
        G28 X Y
    {% endif %}